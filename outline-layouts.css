/* outline css - layout */

/* block layouts */
body, address, article, aside, footer, header, main, nav, section {
   width:100%;
   margin:0 auto 0 auto;
   padding:0 auto 0 auto;
}

body {
   font-family: var(--font-family);
   font-size:var(--font-size);
   color:var(--body_text_color);
   line-height:1.5rem;
   width:100%;
   min-height:100vh;
   margin:0;
   padding:0;
   overflow-x:hidden;
}

/* 
//   SECTION HEADINGS
*/
h1, h2, h3, h4, h5, h6 {margin:0;}
h1 {
   font-size:var(--h1_size);
   line-height:var(--h1_line_height);
   padding:1rem 1rem 2rem 1rem;
}
h2 {
   font-size:var(--h2_size);
   line-height:var(--h2_line_height);
   padding:.8rem 1rem 1.5rem 1rem;
}
h3 {
   font-size:var(--h3_size);
   line-height:var(--h3_line_height);
   padding:.6rem 1rem 1.25rem 1rem;
}
h4 {
   font-size:var(--h4_size);
   line-height:var(--h4_line_height);
   padding:.5rem 1rem 1rem 1rem;
}
h5 {
   font-size:var(--h5_size);
   line-height:var(--h5_line_height); 
   padding:.3rem 1rem .5rem 1rem;
}
h6 {
   font-size:var(--h6_size);
   line-height:var(--h6_line_height);
   padding:.25rem 1rem .25rem 1rem;
}


/* 
//   MAIN NAV COMPONENT
//   future : refactor/reduce code length
*/
nav {
   position:relative;
   position:-webkit-sticky;
   position:sticky;
   top:0;
   z-index:900;
   
   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -webkit-box-align:center;
   -ms-flex-align:center;
   align-items:center;

   width:100%;
   height:var(--nav_bar_height);
   transition:transform .6s ease-in;
}
nav div.logo_block {
   /* we don't assume a logo aspect-ratio - but assure height is contained by nav_bar */
   position:relative;
   z-index:50;
   -webkit-box-flex:2;
   -ms-flex-positive:2;
   flex-grow:2;
   background:white;    /* img width may not cover all */
   height:var(--nav_bar_height);
}
nav div.logo_block > a > img {
   max-height:100%;
   width:auto;
}
nav ul.menu {
   position:absolute;
   z-index:2;

   top:-100vh;   /* default - dropdown is hidden */
   left:0;
   
   -ms-flex-item-align:start;
   align-self:flex-start;

   height:100vh;
   padding-top:var(--nav_bar_height);
   border-bottom:solid 3px hsl(0, 0%, 96%);
   background:white;

   -webkit-transform:translateY(0px);
   -ms-transform:translateY(0px);
   transform:translateY(0px);
   opacity:0;
   transition:transform .75s ease-in-out .25s,opacity 3s ease-in-out .25s;
}
/* mobile menu toggle */
nav > div.nav_toggle_wrap {
   width:calc(var(--nav_toggle_size) * 2);
   min-height:var(--nav_bar_height);
   padding:calc(var(--nav_toggle_size) / 5);
   background:var(--nav_bar_bg);
}
nav div.nav_toggle {
   position:relative;
   z-index:3;
   padding:0;
   width:100%;
   height:var(--nav_toggle_size);
   background-color:var(--toggle_bg_color);
   cursor:pointer;
}
nav div.nav_toggle .toggle_bar {
   position:absolute;
   top:0;
   display:block;
   width:var(--nav_toggle_size) ;
   height:calc(var(--nav_toggle_size) / 10);
   margin-bottom:15px;
   background:var(--toggle_bar_color);

   -webkit-transform:rotate(0);
   -ms-transform:rotate(0);
   transform:rotate(0deg);
   transition:.5s ease-in-out;
}

nav div.nav_toggle .toggle_bar:nth-child(1) {top:calc(var(--nav_toggle_size) / 5);}
nav div.nav_toggle .toggle_bar:nth-child(3) {top:calc(var(--nav_toggle_size) - var(--nav_toggle_size) / 5);}
nav div.nav_toggle .toggle_bar:nth-child(2) {
   top:calc(var(--nav_toggle_size) / 2);
   left:0;
   width:var(--nav_toggle_size);
   opacity:1;
   transition:all .5s ease-in-out,opacity .25s ease-in-out;
}

/* on open dropdown */
nav div.nav_toggle.selected_toggle .toggle_bar:nth-child(1),
nav div.nav_toggle.selected_toggle .toggle_bar:nth-child(3) {
   top:calc(var(--nav_toggle_size) / 2);
   transition:.25s ease-in-out;
}
nav div.nav_toggle.selected_toggle .toggle_bar:nth-child(1) {
   -webkit-transform:rotate(135deg);
   -ms-transform:rotate(135deg);
   transform:rotate(135deg);
}
nav div.nav_toggle.selected_toggle .toggle_bar:nth-child(3) {
   -webkit-transform:rotate(-135deg);
   -ms-transform:rotate(-135deg);
   transform:rotate(-135deg);
}
/* middle bar fades out */
nav div.nav_toggle.selected_toggle .toggle_bar:nth-child(2) {
   opacity:0;
   left:calc(var(--nav_toggle_size) / 2);
   width:0%;
   transition:all .5s ease-in-out,opacity .25s ease-in-out;
}

/* we hide all submenu dropdowns on mobile.. */
nav ul.menu li ul, nav ul.menu li a  {
   display:none;
   text-decoration:none;
   padding-left:2rem;
   padding-right:2rem;
}
/* ..then restore the top level label links */
nav ul.menu > li > a  {
   position:relative;
   display:block;
   padding:1.25rem .5rem 1.25rem .5rem;
   background:white;
}
/* toggled sm/mobile nav dropdown */
nav ul.menu.extended_nav_dropdown {
   -webkit-transform:translateY(100vh);
   -ms-transform:translateY(100vh);
   transform:translateY(100vh);
   opacity:1;
   transition:transform .5s ease-in-out,opacity .5s ease-in-out;
}
/* wmaintain <a> spacing on transitions */
nav ul.menu li ul li a {margin:1rem;}

/* 
// lg top main nav and full dropdown - we support from 1045px determined by four cols of text in dropdown 
*/
@media screen and (min-width: 1045px) {
   /* reset from mobile */
   nav div.nav_toggle_wrap, nav div.nav_toggle {display:none;}
   nav ul.menu *, nav ul.menu li ul, nav ul.menu li a {display:block;}
   nav ul.menu, nav ul.menu > li > a, nav ul.menu.extended_nav_dropdown {
      transform:unset;
      opacity:1;
      transition:none;
   }
   
   /* logo_block provides overlay in front of moving dropdown */
   nav div.logo_block {
      position:relative;
      -webkit-box-flex:2;
      -ms-flex-positive:2;
      flex-grow:2;
   }
   nav ul.menu {
      max-height:300px;
   }
   nav ul.menu > li {
      display:-webkit-box;
      display:-ms-flexbox;
      display:flex;
      -webkit-box-align:center;
      -ms-flex-align:center;
      align-items:center;
      background:white;
   }
   nav ul.menu li a.menu_label {
      padding-left:2rem;
      padding-right:2rem;
      margin:0;
   }
   nav ul.menu {
      /* create flex row for menu_labels */
      position:static;
      display:-webkit-box;
      display:-ms-flexbox;
      display:flex;
      -webkit-box-pack:end;
      -ms-flex-pack:end;
      justify-content:flex-end;
      -webkit-box-flex:0;
      -ms-flex-positive:0;
      flex-grow:0;
      gap:0rem;

      width:unset;
      height:100%;
      padding-top:0;
      background:white;
      border-bottom:none;
   }
   /* md/lg dropdowns */
   nav ul.menu:hover li a  {
      display:block;
   }
   .menu_dropdown li {
      display:-webkit-box;
      display:-ms-flexbox;
      display:flex;
      -webkit-box-orient:vertical;
      -webkit-box-direction:normal;
      -ms-flex-direction:column;
      flex-direction:column;
      -webkit-box-align:start;
      -ms-flex-align:start;
      align-items:flex-start;
      gap:.5rem;
   }
   nav ul.menu .menu_dropdown {
      /* extract dropdowns from menu_labels flex row */
      position:absolute;
      top:0;
      left:0;
      z-index:-100; /* hide behind menu_labels flex row */

      display:-webkit-box;
      display:-ms-flexbox;
      display:flex;
      -webkit-box-pack:justify;
      -ms-flex-pack:justify;
      justify-content:space-between;
      gap:.25rem;

      width:100%;
      max-width:100%;
      max-height:500px;
      padding:1rem;
      background:white;

      /* slide up */
      -webkit-transform:translateY(-100%);
      -ms-transform:translateY(-100%);
      transform:translateY(-100%);
      opacity:0;
      border-bottom:solid 3px transparent;
      transition:transform .75s ease-in-out .25s,opacity 3s ease-in-out .25s,border .25s ease-in-out;
   }
   /* open it and keep it open */
   nav ul.menu li a.menu_label:hover + .menu_dropdown,
   nav ul.menu li a.menu_label + .menu_dropdown:hover {
      /* slide down */
      -webkit-transform:translateY(var(--nav_bar_height));
      -ms-transform:translateY(var(--nav_bar_height));
      transform:translateY(var(--nav_bar_height));
      opacity:1;
      border-bottom:solid 3px hsl(0, 0%, 93%);
      transition:transform .75s ease-in-out,opacity .5s ease-in-out,border .5s ease-in-out;
   }
}


/* 
//   SECTION
//   section is the base element of several component blocks
*/
section {
   overflow-x:hidden;
}


/* 
//   SECTION.GALLERY
//   
*/
section.gallery {
   position:relative;

   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -ms-flex-wrap:wrap;
   flex-wrap:wrap;
   -webkit-box-pack:start;
   -ms-flex-pack:start;
   justify-content:flex-start;
   padding:3rem 1rem;
}
/* no <ul> - imgs only */
section.gallery > img {
   max-width:25%;
}
/* <ul> provided.. */
section.gallery > ul {
   display:grid;
   grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
   gap:1rem;
}
section.gallery li > img {
   width:100%;
   border-radius:.25rem;
}


/* 
//   SECTION.ANIMATED_TILES
//   
*/
section.animated_tiles > ul {
   display:grid;
   grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
   gap:0;
}
section.animated_tiles > ul > li {
   position:relative;      /* supports overlay */
   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -webkit-box-orient:vertical;
   -webkit-box-direction:normal;
   -ms-flex-direction:column;
   flex-direction:column;
   -webkit-box-pack:justify;
   -ms-flex-pack:justify;
   justify-content:space-between;
   -webkit-box-align:center;
   -ms-flex-align:center;
   align-items:center;

   padding:1rem;
   overflow:hidden;
}
section.animated_tiles > ul > li *:not(img) {
   z-index:3;
}
/* dimmer overlay */
section.animated_tiles > ul > li::before {
   content:'';
   position:absolute;
   top:0;
   left:0;
   z-index:2;
   width:100%;
   height:100%;
   background:black;
   opacity:0;
}
section.animated_tiles > ul > li:hover::before {
   opacity:0.6;
}
/* background image */
section.animated_tiles > ul > li > img {
   position:absolute;
   top:0;
   left:0;
   z-index:1;
   width:100%;
   height:100%;
   transform:scale(1.01);  /* prevents sizing flicker on transform */
   transition:1s;
}
section.animated_tiles > ul > li:hover > img {
   transform:scale(1.2);
   transition:1s; 
}
section.animated_tiles p {
   font-size:1.3rem;
   text-align:center;
   opacity:0;
   transition:opacity .5s ease-in-out;
}
section.animated_tiles button {
   opacity:0;
   transition:opacity .5s ease-in-out;
}
section.animated_tiles > ul > li:hover > p,
section.animated_tiles > ul > li:hover > button {
   opacity:1;
   transition:opacity .5s ease-in-out;
}


/* 
//   SECTION.FEATURE_BLOCK
//   two panel block - img on left, text on right (reversible)
*/
section.feature_block {
   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -webkit-box-orient:vertical;
   -webkit-box-direction:normal;
   -ms-flex-direction:column;
   flex-direction:column;

   max-width:100%;
   margin-top:var(--feature_block_y_margin);
   margin-bottom:var(--feature_block_y_margin);
   padding:0;
}
section.feature_block > img {
   width:100%;
}
section.feature_block > div {
   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -webkit-box-orient:vertical;
   -webkit-box-direction:normal;
   -ms-flex-direction:column;
   flex-direction:column;
   -ms-flex-pack:distribute;
   justify-content:space-around;
   -webkit-box-align:start;
   -ms-flex-align:start;
   align-items:flex-start;
   gap:1rem;

   padding:2rem;
}
section.feature_block p {
   margin-left:0;
   margin-right:0;
   font-size:1.1rem;
}
section.feature_block > div > *:not(button) {
   margin:0;
   padding:0;
}
section.feature_block.reverse_order {
   flex-direction:column-reverse;
}
@media screen and (min-width: 768px) {
   section.feature_block {
      -webkit-box-orient:horizontal;
      -webkit-box-direction:normal;
      -ms-flex-direction:row;
      flex-direction:row;
      max-width:100%;
   }
   section.feature_block.reverse_order {
      flex-direction:row-reverse;
   }
   /* section.feature_block.col_reverse {flex-direction:row-reverse;}  */
   section.feature_block img {
      width:50%;
   }
}


/* 
//   SECTION.FEATURE_TILES
//   we use grid since we want fixed column widths, spacing is from gap
*/
/* list */
section.feature_tiles > ul {
   display:-ms-grid;
   display:grid;
   grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
   gap:1rem;
}
/* tile */
section.feature_tiles > ul > li {
   min-width:100%;
   text-align:center;
   overflow-x:hidden;   /* manage images */
   padding:0 0 3rem 0;
}
section.feature_tiles  > ul > li > img {
   max-width:100%;
   min-width:300px;
   max-height:75%;    /* ensure img width matches parent in sm sizes */
}


/* 
//   SECTION.FEATURE_TILES_FLEX
//   flex version - images dynamically clip, spacing is from <li>, supports '.stagger_tiles' modifier
*/
/* list */
section.feature_tiles_flex > ul {
   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -ms-flex-wrap:wrap;
   flex-wrap:wrap;
   gap:1rem;
}
/* tile */
section.feature_tiles_flex > ul > li {
   width:100%;
   min-width:340px;
   padding:0 .5rem 0 .5rem;
   overflow-x:hidden; /* in combo w/ <img> object-fit we get dynamic clipping imgs */
   border:solid 1px lightgrey;
   border-radius:.25rem;
   text-align:center;
}
section.feature_tiles_flex  > ul > li > img {
   width:100%;
   height:300px;
   border-radius:.25rem;
   display:block;          /* prevent browser's inline element spacing */
   object-fit: cover;      /* in combo w/ <li> overflow-x we get dynamic clipping imgs */
}
@media screen and (min-width: 660px) {
   section.feature_tiles_flex > ul {
      -webkit-box-orient:horizontal;
      -webkit-box-direction:normal;
      -ms-flex-direction:row;
      flex-direction:row;
      gap:0; /* for predictable spacing, we pad inside <li> */
   }
   section.feature_tiles_flex > ul > li {
      /* this seems contradictory, but has desired effects */
      min-width:50%;          /* ensures both of two cols occupy 50% */
      max-width:25%;   /* ensures any incomplete rows don't fill out to occupy the space (retain col width) */
   }
}
@media screen and (min-width: 982px) {
   section.feature_tiles_flex > ul {
      gap:0;padding:0;
   }
   section.feature_tiles_flex > ul > li {
      min-width:33.333333%;
   }
   /* .stagger_tiles - we modify every 6th <li> starting at indexes 1 and 6. */
   section.feature_tiles_flex.stagger_tiles > ul > li {
      min-width:25%;
   }
   section.feature_tiles_flex.stagger_tiles > ul > li:nth-child(6n+1),
   section.feature_tiles_flex.stagger_tiles > ul > li:nth-child(6n+6) {
      min-width:50%;
   }
   section.feature_tiles_flex.teasers > ul > li > img {
      min-height:160px;
      max-height:160px;
   }
}


/* 
//   SECTION.COVER_BLOCK
//   large heading over background img - plus optional text & button
*/
section.cover_block {
   position:relative;
   width:100%;
   height:var(--cover_block_height);      /* defaults if no text/content */
   padding-top:5rem;
   padding-bottom:5rem;
   overflow:hidden;
   background:transparent;
}
section.cover_block:has(div) {
   height:fit-content;        /* fit height to content if exists */
}
section.cover_block p {
   margin-left:0;
   margin-right:0;
   font-size:1.2rem;
}
section.cover_block .bg_img {
   position:absolute;
   top:0;
   left:0;
   z-index:-1;
   width:100%;
   object-fit: cover; 
   background-attachment:fixed;
   background-position:bottom;
}
section.cover_block div {
   position:relative;
   display:-webkit-box;
   display:-ms-flexbox;
   display:flex;
   -webkit-box-orient:vertical;
   -webkit-box-direction:normal;
   -ms-flex-direction:column;
   flex-direction:column;
   -ms-flex-pack:distribute;
   justify-content:space-around;
   gap:1rem;

   width:fit-content;
   margin-left:.5rem;
   margin-right:.5rem;
   padding:.5rem;
}


/* 
//   FOOTER
*/
footer {
   margin-top:var(--footer_top_margin);
   margin-bottom:var(--footer_bottom_margin);
   color:white;
   background-color:var(--bg_dark_darker);
}
footer > ul:not(.footnote) {
   display:grid;
   grid-template-columns:1fr;
}
footer ul.footnote   {
   font-size:.9rem;
   text-align:center;
}
footer a {color:white;text-decoration:none;}

@media screen and (min-width: 1045px) {
   footer > ul:not(.footnote) {
      display:grid;
      grid-template-columns:1fr 1fr 1fr;
      grid-template-areas:
         "footer_left footer_middle footer_right "
         "footnote footnote footnote";
   }
   footer > ul.footnote {
      grid-area:footnote;
   }
}

/* 
to do :

- form
- .cover_block_video - video background cover_block
- .feature_block_text : feature block but title one side, text on other side - no img
- title & lead / big title & lead
- cards - simple tiles w/out imgs - adapt/utility class on feature_tiles?
- profile - eg person/name/role/link - adapt feature_tiles?
- timeline/history - ol w/ blocks
- faq_block - list w/ open items inlin


*/